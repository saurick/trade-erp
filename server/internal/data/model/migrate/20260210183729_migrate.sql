-- Create "erp_export_sale_items" table
CREATE TABLE `erp_export_sale_items` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `export_sale_id` bigint NOT NULL,
  `line_no` bigint NOT NULL,
  `product_id` bigint NULL,
  `product_code` varchar(128) NULL,
  `product_name` varchar(255) NULL,
  `cn_desc` varchar(255) NULL,
  `en_desc` varchar(255) NULL,
  `quantity` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `unit_price` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `total_price` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `pack_detail` varchar(255) NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erpexportsaleitem_export_sale_id_line_no` (`export_sale_id`, `line_no`),
  INDEX `erpexportsaleitem_product_code` (`product_code`),
  INDEX `erpexportsaleitem_product_id` (`product_id`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_export_sales" table
CREATE TABLE `erp_export_sales` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `code` varchar(128) NOT NULL,
  `quotation_id` bigint NULL,
  `source_quotation_code` varchar(128) NULL,
  `customer_partner_id` bigint NULL,
  `customer_code` varchar(64) NULL,
  `customer_contract_no` varchar(128) NULL,
  `order_no` varchar(128) NULL,
  `order_date` timestamp NOT NULL,
  `sign_date` timestamp NOT NULL,
  `delivery_date` timestamp NOT NULL,
  `transport_type` varchar(32) NULL,
  `payment_method` varchar(32) NULL,
  `price_term` varchar(32) NULL,
  `start_place` varchar(64) NULL,
  `end_place` varchar(64) NULL,
  `order_flow` varchar(32) NULL,
  `total_amount` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `status` varchar(32) NOT NULL DEFAULT "draft",
  `remark` varchar(512) NULL,
  `created_by_admin_id` bigint NULL,
  `updated_by_admin_id` bigint NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erpexportsale_code` (`code`),
  INDEX `erpexportsale_customer_partner_id` (`customer_partner_id`),
  INDEX `erpexportsale_quotation_id` (`quotation_id`),
  INDEX `erpexportsale_status_sign_date` (`status`, `sign_date`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_partners" table
CREATE TABLE `erp_partners` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `code` varchar(64) NOT NULL,
  `partner_type` varchar(32) NOT NULL,
  `name` varchar(128) NOT NULL,
  `short_name` varchar(128) NULL,
  `tax_no` varchar(64) NULL,
  `currency` varchar(16) NOT NULL DEFAULT "USD",
  `payment_cycle_days` bigint NOT NULL DEFAULT 0,
  `address` varchar(255) NULL,
  `contact` varchar(64) NULL,
  `contact_phone` varchar(64) NULL,
  `email` varchar(128) NULL,
  `disabled` bool NOT NULL DEFAULT 0,
  `extra_json` longtext NULL,
  `created_by_admin_id` bigint NULL,
  `updated_by_admin_id` bigint NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erppartner_code` (`code`),
  INDEX `erppartner_name` (`name`),
  INDEX `erppartner_partner_type` (`partner_type`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_products" table
CREATE TABLE `erp_products` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `code` varchar(128) NOT NULL,
  `hs_code` varchar(64) NULL,
  `spec_code` varchar(128) NULL,
  `drawing_no` varchar(128) NULL,
  `cn_desc` varchar(255) NULL,
  `en_desc` varchar(255) NULL,
  `unit` varchar(32) NOT NULL DEFAULT "pcs",
  `disabled` bool NOT NULL DEFAULT 0,
  `extra_json` longtext NULL,
  `created_by_admin_id` bigint NULL,
  `updated_by_admin_id` bigint NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erpproduct_code` (`code`),
  INDEX `erpproduct_hs_code` (`hs_code`),
  INDEX `erpproduct_spec_code` (`spec_code`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_quotation_items" table
CREATE TABLE `erp_quotation_items` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `quotation_id` bigint NOT NULL,
  `line_no` bigint NOT NULL,
  `product_id` bigint NULL,
  `product_code` varchar(128) NULL,
  `product_name` varchar(255) NULL,
  `quantity` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `unit_price` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `total_price` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `remark` varchar(255) NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `erpquotationitem_product_code` (`product_code`),
  INDEX `erpquotationitem_product_id` (`product_id`),
  UNIQUE INDEX `erpquotationitem_quotation_id_line_no` (`quotation_id`, `line_no`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_quotations" table
CREATE TABLE `erp_quotations` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `code` varchar(128) NOT NULL,
  `customer_partner_id` bigint NULL,
  `customer_code` varchar(64) NULL,
  `quoted_date` timestamp NOT NULL,
  `currency` varchar(16) NOT NULL DEFAULT "USD",
  `price_term` varchar(32) NULL,
  `payment_method` varchar(32) NULL,
  `delivery_method` varchar(32) NULL,
  `start_place` varchar(64) NULL,
  `end_place` varchar(64) NULL,
  `total_amount` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `status` varchar(32) NOT NULL DEFAULT "draft",
  `accepted` bool NOT NULL DEFAULT 0,
  `accepted_at` timestamp NULL,
  `remark` varchar(512) NULL,
  `created_by_admin_id` bigint NULL,
  `updated_by_admin_id` bigint NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erpquotation_code` (`code`),
  INDEX `erpquotation_customer_partner_id` (`customer_partner_id`),
  INDEX `erpquotation_status_quoted_date` (`status`, `quoted_date`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
