-- Create "erp_inbound_notice_items" table
CREATE TABLE `erp_inbound_notice_items` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `inbound_notice_id` bigint NOT NULL,
  `line_no` bigint NOT NULL,
  `product_id` bigint NULL,
  `product_code` varchar(128) NULL,
  `product_name` varchar(255) NULL,
  `lot_no` varchar(64) NULL,
  `quantity` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `passed_qty` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `rejected_qty` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `report_attachment_id` bigint NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erpinboundnoticeitem_inbound_notice_id_line_no` (`inbound_notice_id`, `line_no`),
  INDEX `erpinboundnoticeitem_product_code` (`product_code`),
  INDEX `erpinboundnoticeitem_product_id` (`product_id`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_inbound_notices" table
CREATE TABLE `erp_inbound_notices` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `code` varchar(128) NOT NULL,
  `purchase_contract_id` bigint NULL,
  `source_purchase_code` varchar(128) NULL,
  `entry_no` varchar(128) NULL,
  `warehouse_id` bigint NULL,
  `location_id` bigint NULL,
  `qc_status` varchar(32) NOT NULL DEFAULT "pending",
  `inbound_status` varchar(32) NOT NULL DEFAULT "pending",
  `allow_inbound_at` timestamp NULL,
  `remark` varchar(512) NULL,
  `created_by_admin_id` bigint NULL,
  `updated_by_admin_id` bigint NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erpinboundnotice_code` (`code`),
  INDEX `erpinboundnotice_inbound_status_created_at` (`inbound_status`, `created_at`),
  INDEX `erpinboundnotice_purchase_contract_id` (`purchase_contract_id`),
  INDEX `erpinboundnotice_qc_status_inbound_status` (`qc_status`, `inbound_status`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_outbound_order_items" table
CREATE TABLE `erp_outbound_order_items` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `outbound_order_id` bigint NOT NULL,
  `line_no` bigint NOT NULL,
  `product_id` bigint NULL,
  `product_code` varchar(128) NULL,
  `lot_no` varchar(64) NULL,
  `quantity` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erpoutboundorderitem_outbound_order_id_line_no` (`outbound_order_id`, `line_no`),
  INDEX `erpoutboundorderitem_product_code` (`product_code`),
  INDEX `erpoutboundorderitem_product_id` (`product_id`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_outbound_orders" table
CREATE TABLE `erp_outbound_orders` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `code` varchar(128) NOT NULL,
  `shipment_detail_id` bigint NULL,
  `source_shipment_code` varchar(128) NULL,
  `warehouse_id` bigint NULL,
  `location_id` bigint NULL,
  `outbound_date` timestamp NOT NULL,
  `total_quantity` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `status` varchar(32) NOT NULL DEFAULT "draft",
  `remark` varchar(512) NULL,
  `created_by_admin_id` bigint NULL,
  `updated_by_admin_id` bigint NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erpoutboundorder_code` (`code`),
  INDEX `erpoutboundorder_shipment_detail_id` (`shipment_detail_id`),
  INDEX `erpoutboundorder_status_outbound_date` (`status`, `outbound_date`),
  INDEX `erpoutboundorder_warehouse_id_location_id` (`warehouse_id`, `location_id`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_purchase_contract_items" table
CREATE TABLE `erp_purchase_contract_items` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `purchase_contract_id` bigint NOT NULL,
  `line_no` bigint NOT NULL,
  `product_id` bigint NULL,
  `product_code` varchar(128) NULL,
  `product_name` varchar(255) NULL,
  `spec_code` varchar(128) NULL,
  `quantity` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `unit_price` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `total_price` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `erppurchasecontractitem_product_code` (`product_code`),
  INDEX `erppurchasecontractitem_product_id` (`product_id`),
  UNIQUE INDEX `erppurchasecontractitem_purchase_contract_id_line_no` (`purchase_contract_id`, `line_no`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_purchase_contracts" table
CREATE TABLE `erp_purchase_contracts` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `code` varchar(128) NOT NULL,
  `export_sale_id` bigint NULL,
  `source_export_code` varchar(128) NULL,
  `supplier_partner_id` bigint NULL,
  `supplier_code` varchar(64) NULL,
  `sign_date` timestamp NOT NULL,
  `sales_no` varchar(64) NULL,
  `delivery_date` timestamp NOT NULL,
  `delivery_address` varchar(255) NULL,
  `follower` varchar(64) NULL,
  `buyer` varchar(64) NULL,
  `invoice_required` bool NOT NULL DEFAULT 0,
  `total_amount` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `status` varchar(32) NOT NULL DEFAULT "draft",
  `remark` varchar(512) NULL,
  `created_by_admin_id` bigint NULL,
  `updated_by_admin_id` bigint NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erppurchasecontract_code` (`code`),
  INDEX `erppurchasecontract_export_sale_id` (`export_sale_id`),
  INDEX `erppurchasecontract_status_sign_date` (`status`, `sign_date`),
  INDEX `erppurchasecontract_supplier_partner_id` (`supplier_partner_id`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_shipment_detail_items" table
CREATE TABLE `erp_shipment_detail_items` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `shipment_detail_id` bigint NOT NULL,
  `line_no` bigint NOT NULL,
  `product_id` bigint NULL,
  `product_code` varchar(128) NULL,
  `product_model` varchar(255) NULL,
  `pack_detail` varchar(255) NULL,
  `quantity` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `unit_price` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `total_price` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `net_weight` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `gross_weight` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `volume` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `erpshipmentdetailitem_product_code` (`product_code`),
  INDEX `erpshipmentdetailitem_product_id` (`product_id`),
  UNIQUE INDEX `erpshipmentdetailitem_shipment_detail_id_line_no` (`shipment_detail_id`, `line_no`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "erp_shipment_details" table
CREATE TABLE `erp_shipment_details` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `code` varchar(128) NOT NULL,
  `export_sale_id` bigint NULL,
  `source_export_code` varchar(128) NULL,
  `customer_partner_id` bigint NULL,
  `customer_code` varchar(64) NULL,
  `start_port` varchar(64) NULL,
  `dest_port` varchar(64) NULL,
  `ship_to_address` varchar(255) NULL,
  `arrive_country` varchar(64) NULL,
  `transport_type` varchar(32) NULL,
  `sales_owner` varchar(64) NULL,
  `warehouse_ship_date` timestamp NOT NULL,
  `total_packages` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `total_amount` decimal(20,6) NOT NULL DEFAULT 0.000000,
  `status` varchar(32) NOT NULL DEFAULT "draft",
  `remark` varchar(512) NULL,
  `created_by_admin_id` bigint NULL,
  `updated_by_admin_id` bigint NULL,
  `created_at` timestamp NOT NULL,
  `updated_at` timestamp NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `erpshipmentdetail_code` (`code`),
  INDEX `erpshipmentdetail_customer_partner_id` (`customer_partner_id`),
  INDEX `erpshipmentdetail_export_sale_id` (`export_sale_id`),
  INDEX `erpshipmentdetail_status_warehouse_ship_date` (`status`, `warehouse_ship_date`)
) CHARSET utf8mb4 COLLATE utf8mb4_bin;
